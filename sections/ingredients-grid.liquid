{% schema %}
{
  "name": "Ingredients Grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Science-Backed Ingredients"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Formulated with proven ingredients to help you fall asleep faster, stay asleep longer, and wake up refreshed."
    },
    {
      "type": "url",
      "id": "link",
      "label": "Full Ingredients List Link"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#e6e0d5"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "label": "Heading Font Size (px)",
      "min": 18,
      "max": 60,
      "step": 1,
      "default": 28
    },
    {
      "type": "range",
      "id": "subheading_font_size",
      "label": "Subheading Font Size (px)",
      "min": 12,
      "max": 30,
      "step": 1,
      "default": 16
    },
    {
      "type": "range",
      "id": "ingredient_font_size",
      "label": "Ingredient Title Font Size (px)",
      "min": 12,
      "max": 30,
      "step": 1,
      "default": 16
    }
  ],
  "blocks": [
    {
      "type": "ingredient",
      "name": "Ingredient",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Ingredient Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Ingredient Name",
          "default": "Ingredient Name"
        }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Ingredients Grid",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<section class="ingredients-section"
  style="
    background: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
  ">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="section-title"
          style="font-size: {{ section.settings.heading_font_size }}px; color: {{ section.settings.text_color }};">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    {% if section.settings.subheading != blank %}
      <p class="section-subtitle"
         style="font-size: {{ section.settings.subheading_font_size }}px; color: {{ section.settings.text_color }};">
        {{ section.settings.subheading }}
      </p>
    {% endif %}

    <div class="ingredients-grid">
      {% for block in section.blocks %}
        <div class="ingredient-item">
          {% if block.settings.image %}
            <img src="{{ block.settings.image | img_url: '200x' }}" alt="{{ block.settings.title }}">
          {% endif %}
          <h3 style="font-size: {{ section.settings.ingredient_font_size }}px; color: {{ section.settings.text_color }};">
            {{ block.settings.title }}
          </h3>
          <button class="plus-btn">+</button>
        </div>
      {% endfor %}
    </div>

    {% if section.settings.link != blank %}
      <a href="{{ section.settings.link }}" class="ingredients-link" style="color: {{ section.settings.text_color }};">
        See Full Ingredients List
      </a>
    {% endif %}
  </div>
</section>

<style>
.ingredients-section {
  text-align: center;
  padding: 60px 20px;
}

.ingredients-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 40px;
  margin-bottom: 30px;
}

.ingredient-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.ingredient-item img {
  max-width: 100px;
  margin-bottom: 15px;
}

.plus-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 1px solid #aaa;
  background: #fff;
  font-size: 18px;
  cursor: pointer;
  line-height: 30px;
}

.ingredients-link {
  display: inline-block;
  font-weight: 600;
  text-decoration: underline;
}
</style>
